name: ðŸŒ™ Mystic Daily Commit

on:
  schedule:
    - cron: '0 0 * * *'   # æ¯å¤© UTC 00:00ï¼ˆåŒ—äº¬æ—¶é—´ 08:00
  workflow_dispatch:

jobs:
  commit:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout the repo
        uses: actions/checkout@v4

      - name: Generate mystic quote and fortune and append to README
        run: |
          fortunes=(
            "ðŸŒŸ ä»Šæ—¥ã®é‹å‹¢ï¼šå¤§å‰ â€” ä¸‡äº‹é †èª¿ã€å¿ƒé™å¦‚æ°´ã€‚"
            "ðŸŒž ä»Šæ—¥ã®é‹å‹¢ï¼šä¸­å‰ â€” æœ‰æ”¶èŽ·ï¼Œä½†éœ€è°¨æ…Žè¡Œäº‹ã€‚"
            "ðŸŒ¤ï¸ ä»Šæ—¥ã®é‹å‹¢ï¼šå°å‰ â€” ç»†é›¨æ¶¦ç‰©ï¼Œè“„åŠ¿å¾…å‘ã€‚"
            "ðŸŒ«ï¸ ä»Šæ—¥ã®é‹å‹¢ï¼šæœ«å‰ â€” è¿è½¬å¾®å¦™ï¼Œå‹¿æ€¥å‹¿èºã€‚"
            "ðŸŒ§ï¸ ä»Šæ—¥ã®é‹å‹¢ï¼šå‡¶ â€” å‡¡äº‹ä¸å¼ºæ±‚ï¼Œé™è§‚å…¶å˜ã€‚"
          )

          FORTUNE=${fortunes[$RANDOM % ${#fortunes[@]}]}
          DATE=$(date '+%Y-%m-%d')

          echo "" >> README.md
          echo "$FORTUNE" >> README.md
          echo "ðŸ—“ï¸ $DATE" >> README.md
          echo "" >> README.md

      - name: Commit and push changes
        env:
          TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          git config --global user.name "CYXNBNBNB"
          git config --global user.email "cyxnbnbnb@gmail.com"
          git remote set-url origin https://x-access-token:${TOKEN}@github.com/${{ github.repository }}
          git add README.md
          git commit -m "ðŸŒŒ Mystic update on $(date '+%Y-%m-%d')" || echo "No changes to commit"
          git push origin main
